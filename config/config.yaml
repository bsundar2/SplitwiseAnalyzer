# Date formats for parsing
date_formats:
  - "%Y-%m-%d"
  - "%m/%d/%Y"
  - "%d/%m/%Y"

# Merchant cleaning patterns
merchant_cleaning:
  # Patterns to remove or replace
  patterns:
    # Remove transaction IDs and reference numbers from the start
    - pattern: '^\s*[0-9a-f]{8,}(?:[0-9a-f]+)?\s+'
      replacement: ''
      description: 'Remove hexadecimal IDs at start'
    # Remove transaction IDs from the end
    - pattern: '\s+[0-9a-f]{8,}(?:[0-9a-f]+)?\s*$'
      replacement: ''
      description: 'Remove hexadecimal IDs at end'
    # Remove foreign transaction details
    - pattern: '(?i)\b(?:foreign spend amount|commission amount|currency exchange rate):.*$'
      replacement: ''
      description: 'Remove foreign transaction details'
    # Remove country codes and locations
    - pattern: '(?i)\b(?:sg|usa|uk|gb|au|ca|in|fr|de|jp|cn|kr|my|th|vn|id|ph|hk|tw)\b'
      replacement: ''
      description: 'Remove country codes'
    
    # Clean up payment processors
    - pattern: '\b(?:PAYPAL|PAYPAL \*|PP|PP\*)\s*'
      replacement: 'PayPal '
    - pattern: '\b(?:SQ\s*\*?\s*|\*SQ\*)\s*'
      replacement: 'Square '
    - pattern: '\b(?:GOOGLE\s*\*?\s*|\*GOOGLE\*)\s*'
      replacement: 'Google '
    - pattern: '\b(?:AMZN\s*MKTP\s*|\*AMZN MKT\*)\s*'
      replacement: 'Amazon '
    - pattern: '\b(?:APPLE\s*COM|APPLE\.COM)\s*'
      replacement: 'Apple '

  # Special handling for known merchants
  merchants:
    - match: 'GRAB.*TAXI'
      name: 'Grab Taxi'
    - match: 'UBER'
      name: 'Uber'
    - match: 'LYFT'
      name: 'Lyft'
    - match: '(?i)(?:TAXICAB.*LIMOUSINE|(?:TAXI|CAB|UBER|LYFT).*SERVICE)'
      name: 'Taxi Service'

  # Keep everything on the first line that looks like a merchant name
  remove_after_newline: false
  extract_first_line: true

# Legacy merchant overrides (for backward compatibility)
merchant_overrides:
  "UBER": "Uber"
  "LYFT": "Lyft"
  "SPOTIFY": "Spotify"

# Category inference configuration
category_inference:
  # Default category to use when no match is found
  default_category:
    id: 18  # Typically "Other" category ID in Splitwise
    name: "Other"
    subcategory_id: 0
    subcategory_name: "Other"
    
  # Additional patterns that don't fit neatly into categories
  additional_patterns:
    - pattern: "(?i)headway"
      category: "Education"
      subcategory: "Online Learning"
    - pattern: "(?i)fitness"
      category: "Health"
      subcategory: "Gym"
  
  # Category patterns
  patterns:
    - name: "Auto & Transport"
      id: 1
      subcategories:
        - name: "Taxi"
          id: 0
          patterns:
            - "(?i)(?:uber|lyft|taxi(?:cab)?|cab|grab|ride|bolt|limousine|car service)"
        - name: "Car Service"
          id: 4
          patterns:
            - "\\b(?:auto detail|car wash|car service|detailing|wow auto)\\b"
        - name: "Gas"
          id: 1
          patterns:
            - "\\b(?:gas|petrol|exxon|shell|chevron|bp|arco)\\b"
        - name: "Parking"
          id: 2
          patterns:
            - "\\b(?:parking|meter|spothero)\\b"
        - name: "Public Transit"
          id: 3
          patterns:
            - "\\b(?:public transport|subway|metro|bus|train|mta|barta)\\b"
    
    - name: "Food & Drink"
      id: 2
      subcategories:
        - name: "Coffee Shop"
          id: 0
          patterns:
            - "\\b(?:mcdonalds|starbucks|dunkin|peets|coffee|espresso|cafe|deli)\\b"
        - name: "Restaurant"
          id: 1
          patterns:
            - "\\b(?:restaurant|eatery|grill|steakhouse|sushi|pizza|burger|pasta|ramen|thai|chinese|indian|mexican|italian|japanese)\\b"
        - name: "Alcohol & Bars"
          id: 2
          patterns:
            - "\\b(?:bar|pub|brewery|wine|beer|alcohol|liquor)\\b"
        - name: "Groceries"
          id: 3
          patterns:
            - "\\b(?:groceries|whole foods|trader joe|safeway|kroger|publix|aldi|lidl|costco|sams club|circle k|misc food store)\\b"
    
    - name: "Shopping"
      id: 3
      subcategories:
        - name: "General"
          id: 0
          patterns:
            - "\\b(?:amazon|amzn|target|walmart|best buy|home depot|lowes|ikea|costco|walmart|duty.?free|the hainan story coffee)\\b"
        - name: "Clothing"
          id: 1
          patterns:
            - "\\b(?:clothing|apparel|nike|adidas|gap|h&m|zara|uniqlo|nordstrom|macys|untuckit)\\b"
        - name: "Health & Beauty"
          id: 2
          patterns:
            - "\\b(?:guardian health|beauty|cosmetics|skincare|haircut|salon|spa|massage)\\b"
        - name: "Sporting Goods"
          id: 3
          patterns:
            - "\\b(?:wilson|sporting goods|sports equipment|athletic gear)\\b"
        - name: "Jewelry"
          id: 4
          patterns:
            - "\\b(?:mejuri|jewelry|ring|necklace|bracelet|earring|watch)\\b"
    
    - name: "Bills & Utilities"
      id: 4
      subcategories:
        - name: "Utilities"
          id: 0
          patterns:
            - "\\b(?:electric|power|water|gas|utility|pge|coned|national grid)\\b"
        - name: "Internet"
          id: 1
          patterns:
            - "\\b(?:internet|xfinity|comcast|spectrum|verizon fios|att)\\b"
        - name: "Phone"
          id: 2
          patterns:
            - "\\b(?:phone|mobile|verizon|at&t|t-mobile|sprint|tmobile)\\b"
        - name: "TV/Streaming"
          id: 3
          patterns:
            - "\\b(?:tv|netflix|hulu|disney|spotify|youtube premium|hbo max|peacock|paramount)\\b"
    
    - name: "Entertainment"
      id: 5
      subcategories:
        - name: "Movies & TV"
          id: 0
          patterns:
            - "\\b(?:movie|theater|cinema|netflix|hulu|disney|spotify|youtube|hbo|peacock|paramount)\\b"
        - name: "Classes & Learning"
          id: 3
          patterns:
            - "\\b(?:class|workshop|lesson|course|school|education|gama painting|art class|painting school)\\b"
        - name: "Music"
          id: 1
          patterns:
            - "\\b(?:music|concert|festival|spotify|apple music|tidal|pandora|sirius)\\b"
        - name: "Games"
          id: 2
          patterns:
            - "\\b(?:game|steam|playstation|xbox|nintendo|eshop|blizzard|epic games)\\b"
    
    - name: "Travel"
      id: 6
      subcategories:
        - name: "Hotel"
          id: 0
          patterns:
            - "\\b(?:hotel|motel|airbnb|vrbo|booking|expedia|priceline|kayak|hotels\\.com|impiana|como uma|villa|resort|lodging)\\b"
        - name: "Flight"
          id: 1
          patterns:
            - "\\b(?:flight|airline|delta|united|american|southwest|jetblue|spirit|frontier)\\b"
        - name: "Vacation Rental"
          id: 2
          patterns:
            - "\\b(?:airbnb|vrbo|vacation rental|homeaway)\\b"
